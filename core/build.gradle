/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'antlr'
}

sourceSets {
    main {
        antlr {
            srcDirs = ['src/main/antlr4'] // to be compatible with maven naming convention
        }
    }
}

configurations {
    tests
}

dependencies {
    antlr 'org.antlr:antlr4:4.5.1'
    compile 'commons-codec:commons-codec:1.12'
    compile 'commons-io:commons-io:2.5'
    compile 'commons-lang:commons-lang:2.6'
    compile 'org.apache.commons:commons-compress:1.18'
    compile 'org.apache.commons:commons-dbcp2:2.0.1'
    compile 'commons-pool:commons-pool:1.6'
    compile('org.skife.config:config-magic:0.9') {
        exclude group: 'org.slf4j', module: 'slf4j-api'
    }
    compile 'org.hibernate:hibernate-validator:5.1.3.Final'
    compile 'javax.el:javax.el-api:3.0.0'
    compile 'javax.xml.bind:jaxb-api:2.3.1'
    compile 'com.google.guava:guava:16.0.1'
    compile 'com.fasterxml.jackson.core:jackson-core:2.6.7'
    compile 'com.fasterxml.jackson.core:jackson-annotations:2.6.7'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.6.7'
    compile 'com.fasterxml.jackson.datatype:jackson-datatype-guava:2.6.7'
    compile 'com.fasterxml.jackson.datatype:jackson-datatype-joda:2.6.7'
    compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-smile:2.6.7'
    compile 'com.google.inject:guice:4.1.0'
    compile 'com.google.inject.extensions:guice-multibindings:4.1.0'
    compile 'org.jdbi:jdbi:2.63.1'
    compile 'joda-time:joda-time:2.10.2'
    compile 'org.apache.logging.log4j:log4j-api:2.5'
    compile 'org.apache.logging.log4j:log4j-core:2.5'
    compile 'org.apache.logging.log4j:log4j-slf4j-impl:2.5'
    compile 'org.apache.logging.log4j:log4j-jul:2.5'
    compile 'org.apache.logging.log4j:log4j-1.2-api:2.5'
    compile 'org.slf4j:slf4j-api:1.7.25'
    compile 'org.slf4j:jcl-over-slf4j:1.7.12'
    compile('io.airlift:airline:0.7') {
        exclude group: 'com.google.code.findbugs', module: 'annotations' // LGPL licensed library
    }
    compile 'io.dropwizard.metrics:metrics-core:4.0.0'
    compile 'net.thisptr:jackson-jq:0.0.7'
    compile 'it.unimi.dsi:fastutil:8.1.0'
    compile 'com.opencsv:opencsv:4.2'
    compile 'org.mozilla:rhino:1.7R5'
    compile 'org.tukaani:xz:1.8'
    compile 'com.github.luben:zstd-jni:1.3.3-1'
    compile 'com.jayway.jsonpath:json-path:2.3.0'
    compile 'org.antlr:antlr4-runtime:4.5.1'
    compile 'com.lmax:disruptor:3.3.6'
    compile 'com.google.code.findbugs:jsr305:2.0.1'
    compile 'net.java.dev.jna:jna:4.5.1'
    compile 'javax.validation:validation-api:1.1.0.Final'
    compile 'org.asynchttpclient:async-http-client:2.5.3'
    compile 'org.hyperic:sigar:1.6.5.132'
    compile 'org.gridkit.lab:jvm-attach-api:1.5'
    compile 'io.netty:netty:3.10.6.Final'
    compile 'com.google.errorprone:error_prone_annotations:2.3.2'
    testCompile 'junit:junit:4.12'
    testCompile 'org.easymock:easymock:4.0.2'
    testCompile 'org.hamcrest:hamcrest-all:1.3'
    testCompile 'org.slf4j:slf4j-simple:1.7.12'
    testCompile 'org.eclipse.jetty:jetty-server:9.4.10.v20180503'
    testCompile 'org.eclipse.jetty:jetty-servlet:9.4.10.v20180503'
    compileOnly 'org.hyperic:sigar-dist:1.6.5.132'
}

description = 'druid-core'

task testsJar(type: Jar) {
    classifier = 'tests'
    from(sourceSets.test.output)
}

publishing.publications.maven.artifact(testsJar)

artifacts {
    tests testsJar
}

generateGrammarSource {
    arguments += ["-package", "org.apache.druid.math.expr.antlr"]
}
